(function(a){a.widget("ui.squiggles",a.ui.mouse,{options:{animate:false,max:100,min:0,valueX:0,valueY:0},_create:function(){var c=this,h=this.options,g=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",b=1,e=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(h.disabled?" ui-slider-disabled ui-disabled":""));for(var d=g.length;d<b;d+=1){e.push(f)}this.handles=g.add(a(e.join("")).appendTo(c.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(i){i.preventDefault()}).hover(function(){if(!h.disabled){a(this).addClass("ui-state-hover")}},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(!h.disabled){a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}else{a(this).blur()}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(j){a(this).data("index.ui-slider-handle",j)});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(d){var e=this.options,h,j,c,f,l,i,k,g,b;if(e.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();h={x:d.pageX,y:d.pageY};j=this._normValueFromMouse(h);this._slide(d,i,j);return true},_mouseStart:function(b){return true},_mouseDrag:function(d){var b={x:d.pageX,y:d.pageY},c=this._normValueFromMouse(b);this._slide(d,this._handleIndex,c);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_normValueFromMouse:function(b){var e,g,d,c,f;e=this.elementSize.width;g=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0);pixelTotalY=this.elementSize.height;pixelMouseY=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);d=(g/e);if(d>1){d=1}if(d<0){d=0}percentMouseY=(pixelMouseY/pixelTotalY);if(percentMouseY>1){percentMouseY=1}if(percentMouseY<0){percentMouseY=0}percentMouseY=1-percentMouseY;c=this._valueMax()-this._valueMin();f=this._valueMin()+d*c;valueMouseY=this._valueMin()+percentMouseY*c;return{x:f,y:valueMouseY}},_slide:function(f,d,e){var b,c,g;if(e!==this.value()){g=this._trigger("slide",f,{handle:this.handles[d],value:e});if(g!==false){this.value(e)}}},_stop:function(d,c){var b={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){b.value=this.values(c);b.values=this.values()}this._trigger("stop",d,b)},_change:function(d,c){if(!this._keySliding&&!this._mouseSliding){var b={handle:this.handles[c],value:this.value()};if(this.options.values&&this.options.values.length){b.value=this.values(c);b.values=this.values()}this._trigger("change",d,b)}},value:function(b){if(arguments.length){this.options.valueX=b.x;this.options.valueY=b.y;this._refreshValue();return}return this._value()},_value:function(){var c=this.options.valueX;var b=this.options.valueY;return{x:c,y:b}},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e=this.options.range,d=this.options,m=this,c=(!this._animateOff)?d.animate:false,k,i,b={},f,j,g,h,l;g=this.value();h=this._valueMin();l=this._valueMax();k=(l!==h)?(g.x-h)/(l-h)*100:0;i=(l!==h)?(g.y-h)/(l-h)*100:0;b.left=k+"%";b.bottom=i+"%";this.handle.stop(1,1)[c?"animate":"css"](b,d.animate)}})})(jQuery);